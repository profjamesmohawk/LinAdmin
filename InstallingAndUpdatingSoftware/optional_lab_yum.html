<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  	<link rel="stylesheet" href="../jbl_labs.css"> 
  	<title>
		Optional Lab: Updating with YUM
	</title>
<script type="text/javascript">
 	function unhide(divID) {
 		var item = document.getElementById(divID);
 		if (item) {
 			item.className=(item.className=='hidden')?'unhidden':'hidden';
 		}
	}
 </script>
  
</head>

<body>
<h2>Optional Lab: Updating with YUM  </h2>
<h1>Warning</h1>
<p class="description">
This lab will not work on the fall 2023 VM.  There is not enough disk space on the VM.
</p>

<a href="javascript:unhide('foo')">Show/Hide Lab</a>
<span id="foo" class="hidden">

<h2>Updating Software with yum, from the Red Hat repos</h2>
<p class="description">
As we mentioned in the lecture, a Red Hat developer account is required to talk to the repositories required to patch.  <br><strong>You do not need to sign up for a Red Hat developer account.  This section is optional.  It will not be on any evaluation.</strong>
<br><strong>You are encouraged to sign-up, it is free and you get access to more documentation as well.</strong>
</p>
<ol>
	<li>Clone w01.  This lab will break the VirtualBox guest extensions and leave w01 in an unsupported configuration.
	<li>Use <span class=cmd>yum</span> to update the software on <strong>w01 clone</strong> <em>(This could take a few minutes)</em>
	<ul type="a">
	<li>Hide the repo files that point to the DVD drive
	<pre class="code">
cd /etc/yum.repos.d
mv Local* hide
</pre>
	</li>
		<li>Visit <a href="https://developers.redhat.com">developers.redhat.com</a> sign up and get your username and password.</li>
		<li>Register w01 with Red Hat
<pre class="code">
subscription-manager register --username={YOUR_USER_NAME} --password={YOUR_PASSWD} --auto-attach
</pre>
		</li>
<li>Tell subscription manager to modify repo files as required <em>(on by default, but disabled in our lab)</em>
<pre class="code">
subscription-manager config --rhsm.manage_repos=1
</pre>
</li>
	<li>Perform the update.
<pre class="code">
yum update
</pre>
	</li>
	<li>Reboot <strong>w01</strong> 
				<a href="javascript:unhide('A9')">Why?</a>
				<span id="A9" class="hidden">
				<em>The update should have included a new kernel and we need to reboot in order to use it.</em> </span>

	</li>
	<li>Give back the license we were using (we won't need it again)
	<pre class="code">
subscription-manager unregister
</pre>
	</li>
	<br><strong>Note:</strong> Updating the kernel can break the VirtualBox guest extensions.  If this happens, don't panic you can import a fresh w01 from the OVA appliance.
	</ul>
</ol>


</span>


</body>
</html>
